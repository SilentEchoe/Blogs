---
title: SICP|模块化，对象和状态
date: 2025-10-29 13:54:00
tags: [计算机基础,读书笔记]
category: 计算机基础
---

通过前两章[构造数据抽象](https://silentechoe.github.io/2025/10/26/%E6%9E%84%E9%80%A0%E6%95%B0%E6%8D%AE%E6%8A%BD%E8%B1%A1/)和[构造过程抽象](https://silentechoe.github.io/2025/09/28/%E6%9E%84%E9%80%A0%E8%BF%87%E7%A8%8B%E7%9A%84%E6%96%B9%E5%BC%8F/)讲述了如何组合基础函数和基础数据，这些很好展现了**抽象**是如何解决大型系统的复杂性问题。抽象是一个强大的工具，它可以帮助我们解决构建大型系统中的复杂度的问题。但此外还需要一些设计策略，因为它能帮助我们使其**模块化**。

> 所谓模块化就是能让系统“自然地”分割成一些具有内聚力的，可以独立开发和维护的部分，而高内聚和低耦合一直是架构师的崇高目标。

通过模拟现实世界是一种设计策略，比如要做一个银行系统，在程序中不可避免创造出“账户”“交易”“转账”等结构性对象，这些对象在各个时间段发生变化，正如现实世界中的实体一样。更好的期望是：当随着时间的流逝，现实生活中的系统拥有了更多的概念，比如出现“移动支付”等新新概念时，只需要在系统中更改某个局部的部分，那么就可以为系统添加新特性。

SICP中展示了两种组织策略，这也反应两种编程思想：

1.将系统视为由互相作用的对象组成。在对象视角下，我们引入**赋值**来更改对象局部状态，并采用新的**环境模型**理解程序运行顺序。

2.将系统看作信息流的处理。在信息流视角下，**流**这一惰性求职来实现序列的按需计算。



### 赋值和局部状态

**局部状态**指的是对象私有的，描述当前状态的变量。比如一个`balance`对象，在银行系统中反映的是账户余额。在没有引入**赋值**前，balance 这个变量只是某一个值的名字，它没有“变量”的概念。根据**函数式编程**的特性，相同输入的函数总是会产生相同输出。但引入赋值后，变量变为指向某个存储位置，这个位置的值可以随着时间改变。

这样对象就可以随着时间而变化其内部的值。

没有赋值前，这种对象像是一个**常量**，它的值是固定的。当有了赋值后，变量成为同一种类型不断变化的存在。赋值使我们能够**模拟现实世界中会变的事物**，例如银行账户的余额、游戏角色的血量等。

**闭包与局部变量：通过闭包**我们可以创建带有内部状态的过程。闭包是在其词法环境中捕获了局部变量的函数。当闭包内部使用赋值改变了捕获的变量值时，就形成了一个拥有“记忆”的对象。例如，下面的 Scheme 代码创建了一个取款器，它有一个封闭的局部变量 balance 作为状态：
