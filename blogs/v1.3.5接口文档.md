### 游戏风险管控接口

#### 接口：根据Uri查询熔断停服的信息

地址：http://{{localhost}}/purchaser/v1/instance-rollbacks

请求模式:POST

请求参数:

```
{
    "uris":["2510101739EeSAId"]
}
```

返回示例：

```json
{
    "code": 0,
    "message": "success",
    "data": [
        {
            "ID": 1,
            "uri": "2510101739EeSAId",
            "rollback": -100,
            "stopCount": 2, //停服次数
            "lastStopTime": 1760370588 //最近一次停服的时间戳
        }
    ]
}
```



#### 接口：设置熔断停服的阈值

地址：http://{{localhost}}/purchaser/v1/instance-rollbacks

请求模式:POST

请求参数:

```json
{
    "ID":1, //如果ID为0则代表没有设置过，请求该接口会新增一条数据。如果ID大于1则会更改信息
    "ProductName":"DAZZ LIVE",
    "GameName":"GreedyKingPro",
    "Uri":"2510101739EeSAId",
    "Version":"1.0.0",
    "Rollback":-200,
    "time_zone":8
}
```

返回示例：

```json
{
    "code": 0,
    "message": "success",
    "data": true
}
```





#### 接口：查询熔断停服的日志详情

地址：http://{{localhost}}/purchaser/v1/rollback-logs

请求模式：POST

请求参数：

```json
{
    "Uri":"2510101739EeSAId"
}
```

返回示例：

```json
{
    "code": 0,
    "message": "success",
    "data": [
        {
            "id": 1,
            "ProductName": "DAZZ LIVE",
            "GameName": "GreedyKingPro",
            "Uri": "2510101739EeSAId",
            "Version": "1.0.0",
            "UserId": 32,
            "Rollback": -100,
            "TimeZone": 0,
            "CreatedTime": 8,
            "InvestGoldTotal": 100,
            "CreatedAt": "2025-10-13T15:05:25Z",
            "UpdatedAt": "2025-10-13T15:05:27Z"
        }
    ]
}
```



#### 接口：设置通知的邮件

地址：http://{{localhost}}/purchaser/v1/purchaser/set-msg-email

请求模式：POST

请求参数：

```json
{
    "msgEmail":"xxxx@qq.com"
}
```

返回示例：

```json
{
    "code": 0,
    "message": "success",
    "data": true
}
```





#### 接口：设置企业熔断

地址：https://admin.3sdk.yu3.co/purchaser/setSustainedLosses

请求模式：POST

请求参数：

```json
{
    "UserId":32,
    "PurchaserId":32,
    "ProductId":31,
    "Day": 1 //如果是全部，设置成-1。
}
```

返回示例：

```json
{
    "code": 0,
    "message": "success",
    "data": true
}
```



#### 接口：查询企业熔断

地址：https://admin.3sdk.yu3.co/purchaser/getSustainedLosses

请求模式：POST

请求参数：

```json
{
    "page":1,
    "page_size":10
}
```

返回示例：

```json
{
    "code": 0,
    "message": "success",
    "data": {
        "items": [
            {
                "PurchaserName": "企业名称",
                "ProductName": "DAZZ LIVE",
                "Day": 1
            },
            {
                "PurchaserName": "企业名称",
                "ProductName": "全部",
                "Day": 5
            }
        ],
        "page": 1,
        "page_size": 10,
        "total": 2
    }
}
```





